import{_ as s,o as n,c as a,Q as p}from"./chunks/framework.a10e78c8.js";const d=JSON.parse('{"title":"ä½ çš„ Pinia åŠ å¯†æ’ä»¶","description":"","frontmatter":{},"headers":[],"relativePath":"vue3-encryption-plugin.md","filePath":"vue3-encryption-plugin.md","lastUpdated":1725635767000}'),l={name:"vue3-encryption-plugin.md"},o=p(`<h1 id="ä½ çš„-pinia-åŠ å¯†æ’ä»¶" tabindex="-1">ä½ çš„ Pinia åŠ å¯†æ’ä»¶ <a class="header-anchor" href="#ä½ çš„-pinia-åŠ å¯†æ’ä»¶" aria-label="Permalink to &quot;ä½ çš„ Pinia åŠ å¯†æ’ä»¶&quot;">â€‹</a></h1><blockquote><p>ä½ çš„ Pinia åŠ å¯†æ’ä»¶æ˜¯ä¸€ä¸ªåŸºäº crypto-js å°è£…çš„å®ç”¨ hooks å·¥å…·ï¼Œç”¨äºåœ¨ Vue.js åº”ç”¨ç¨‹åºä¸­åŠ å¯†å’Œè§£å¯†æ•æ„Ÿæ•°æ®ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•ä¸”å®‰å…¨çš„æ–¹å¼æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚<a href="https://www.npmjs.com/package/vue3-encryption-plugin" target="_blank" rel="noreferrer">npm</a></p></blockquote><h2 id="ğŸŒ-å®‰è£…" tabindex="-1">ğŸŒ å®‰è£… <a class="header-anchor" href="#ğŸŒ-å®‰è£…" aria-label="Permalink to &quot;ğŸŒ å®‰è£…&quot;">â€‹</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨ npm æˆ– yarn å®‰è£…æ’ä»¶ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">pnpm i vue3</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">encryption</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">plugin</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">pnpm i vue3</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">encryption</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">plugin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="ğŸ›¹-ä½¿ç”¨æ–¹æ³•" tabindex="-1">ğŸ›¹ ä½¿ç”¨æ–¹æ³• <a class="header-anchor" href="#ğŸ›¹-ä½¿ç”¨æ–¹æ³•" aria-label="Permalink to &quot;ğŸ›¹ ä½¿ç”¨æ–¹æ³•&quot;">â€‹</a></h2><p>åœ¨ä½ çš„ä¸»åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶ï¼ˆä¾‹å¦‚ main.jsï¼‰ä¸­ï¼Œå¯¼å…¥å¹¶ä½¿ç”¨ Pinia store ä»¥åŠåŠ å¯†æ’ä»¶ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// main.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createApp } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createPinia } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pinia&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> App </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;./App.vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// å¼•å…¥åŠ å¯†æ’ä»¶</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> EncryptionPlugin </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vue3-encryption-plugin&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">app</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createApp</span><span style="color:#E1E4E8;">(App);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">pinia</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createPinia</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(pinia);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ³¨å†ŒåŠ å¯†æ’ä»¶å¹¶æä¾›è‡ªå®šä¹‰çš„å¯†é’¥ï¼ˆå¯é€‰ï¼‰ä¾‹å¦‚ï¼Œéšæœºçš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(EncryptionPlugin, { key: </span><span style="color:#9ECBFF;">&quot;your-custom-secret-key&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;#app&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// main.js</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createApp } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;vue&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createPinia } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;pinia&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> App </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./App.vue&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// å¼•å…¥åŠ å¯†æ’ä»¶</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> EncryptionPlugin </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;vue3-encryption-plugin&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">app</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createApp</span><span style="color:#24292E;">(App);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">pinia</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createPinia</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(pinia);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ³¨å†ŒåŠ å¯†æ’ä»¶å¹¶æä¾›è‡ªå®šä¹‰çš„å¯†é’¥ï¼ˆå¯é€‰ï¼‰ä¾‹å¦‚ï¼Œéšæœºçš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(EncryptionPlugin, { key: </span><span style="color:#032F62;">&quot;your-custom-secret-key&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">mount</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;#app&quot;</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="ğŸ¤–-åŠ å¯†å’Œè§£å¯†" tabindex="-1">ğŸ¤– åŠ å¯†å’Œè§£å¯† <a class="header-anchor" href="#ğŸ¤–-åŠ å¯†å’Œè§£å¯†" aria-label="Permalink to &quot;ğŸ¤– åŠ å¯†å’Œè§£å¯†&quot;">â€‹</a></h2><p>ä¸€æ—¦ä½ è®¾ç½®äº†æ’ä»¶ï¼Œä½ å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ $encrypt å’Œ $decrypt æ–¹æ³•ï¼š</p><blockquote><p>ç¬¬ä¸€ç§ï¼š getCurrentInstance()</p></blockquote><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&lt;!--</span><span style="color:#E1E4E8;"> YourComponent.vue </span><span style="color:#F97583;">--&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {  getCurrentInstance } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">// è·å–å½“å‰ç»„ä»¶çš„ä¸Šä¸‹æ–‡ï¼Œä¸‹é¢ä¸¤ç§æ–¹å¼éƒ½èƒ½è·å–åˆ°ç»„ä»¶çš„ä¸Šä¸‹æ–‡ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">ctx</span><span style="color:#E1E4E8;"> }  </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getCurrentInstance</span><span style="color:#E1E4E8;">();  </span><span style="color:#6A737D;">//  æ–¹å¼ä¸€ï¼Œè¿™ç§æ–¹å¼åªèƒ½åœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒ ä¸‹çš„ctxå°†è®¿é—®ä¸åˆ°</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">proxy</span><span style="color:#E1E4E8;"> }</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getCurrentInstance</span><span style="color:#E1E4E8;">();  </span><span style="color:#6A737D;">//  æ–¹å¼äºŒï¼Œæ­¤æ–¹æ³•åœ¨å¼€å‘ç¯å¢ƒä»¥åŠç”Ÿäº§ç¯å¢ƒä¸‹éƒ½èƒ½åˆ°ç»„ä»¶ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">// ctx ä¸­åŒ…å«äº†ç»„ä»¶ä¸­ç”±refå’Œreactiveåˆ›å»ºçš„å“åº”å¼æ•°æ®å¯¹è±¡,ä»¥åŠä»¥ä¸‹å¯¹è±¡åŠæ–¹æ³•;</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$attrs</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$data</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$el</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$emit</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$forceUpdate</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$nextTick</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$options</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$parent</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$props</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$refs</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$root</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$slots</span></span>
<span class="line"><span style="color:#E1E4E8;">     proxy.$watch</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handClick</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">	console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#9ECBFF;">&quot;åŠ å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">		proxy.$encryptionPlugin.</span><span style="color:#B392F0;">encrypt</span><span style="color:#E1E4E8;">({ name: </span><span style="color:#9ECBFF;">&quot;zk&quot;</span><span style="color:#E1E4E8;">, age: </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">	);</span></span>
<span class="line"><span style="color:#E1E4E8;">	console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#9ECBFF;">&quot;è§£å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">		proxy.$encryptionPlugin.</span><span style="color:#B392F0;">decrypt</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#9ECBFF;">&quot;U2FsdGVkX1/PBDHn2pyLPAf6DmolvylM2QEIDhcf5I3WQWhOh19eos0uZfdbzdDP&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">		)</span></span>
<span class="line"><span style="color:#E1E4E8;">	);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&lt;!--</span><span style="color:#24292E;"> YourComponent.vue </span><span style="color:#D73A49;">--&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {  getCurrentInstance } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// è·å–å½“å‰ç»„ä»¶çš„ä¸Šä¸‹æ–‡ï¼Œä¸‹é¢ä¸¤ç§æ–¹å¼éƒ½èƒ½è·å–åˆ°ç»„ä»¶çš„ä¸Šä¸‹æ–‡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">ctx</span><span style="color:#24292E;"> }  </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getCurrentInstance</span><span style="color:#24292E;">();  </span><span style="color:#6A737D;">//  æ–¹å¼ä¸€ï¼Œè¿™ç§æ–¹å¼åªèƒ½åœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒ ä¸‹çš„ctxå°†è®¿é—®ä¸åˆ°</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">proxy</span><span style="color:#24292E;"> }</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">any</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getCurrentInstance</span><span style="color:#24292E;">();  </span><span style="color:#6A737D;">//  æ–¹å¼äºŒï¼Œæ­¤æ–¹æ³•åœ¨å¼€å‘ç¯å¢ƒä»¥åŠç”Ÿäº§ç¯å¢ƒä¸‹éƒ½èƒ½åˆ°ç»„ä»¶ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// ctx ä¸­åŒ…å«äº†ç»„ä»¶ä¸­ç”±refå’Œreactiveåˆ›å»ºçš„å“åº”å¼æ•°æ®å¯¹è±¡,ä»¥åŠä»¥ä¸‹å¯¹è±¡åŠæ–¹æ³•;</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$attrs</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$data</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$el</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$emit</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$forceUpdate</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$nextTick</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$options</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$parent</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$props</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$refs</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$root</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$slots</span></span>
<span class="line"><span style="color:#24292E;">     proxy.$watch</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">	console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#032F62;">&quot;åŠ å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">		proxy.$encryptionPlugin.</span><span style="color:#6F42C1;">encrypt</span><span style="color:#24292E;">({ name: </span><span style="color:#032F62;">&quot;zk&quot;</span><span style="color:#24292E;">, age: </span><span style="color:#005CC5;">26</span><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">	);</span></span>
<span class="line"><span style="color:#24292E;">	console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#032F62;">&quot;è§£å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">		proxy.$encryptionPlugin.</span><span style="color:#6F42C1;">decrypt</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#032F62;">&quot;U2FsdGVkX1/PBDHn2pyLPAf6DmolvylM2QEIDhcf5I3WQWhOh19eos0uZfdbzdDP&quot;</span></span>
<span class="line"><span style="color:#24292E;">		)</span></span>
<span class="line"><span style="color:#24292E;">	);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><blockquote><p>ç¬¬äºŒç§ injict (æ¨è)</p></blockquote><p>1ï¼šsrc / types / global.d.ts å®šä¹‰ç±»å‹</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// åŠ å¯†è§£å¯†</span></span>
<span class="line"><span style="color:#F97583;">declare</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">interface</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">EncryptionPlugin</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">encryptData</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#B392F0;">T</span><span style="color:#E1E4E8;">&gt;(</span><span style="color:#FFAB70;">data</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">T</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">decryptData</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#B392F0;">T</span><span style="color:#E1E4E8;">&gt;(</span><span style="color:#FFAB70;">encryptedData</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">T</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// åŠ å¯†è§£å¯†</span></span>
<span class="line"><span style="color:#D73A49;">declare</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EncryptionPlugin</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">encryptData</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> &lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292E;">&gt;(</span><span style="color:#E36209;">data</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">T</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">decryptData</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> &lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292E;">&gt;(</span><span style="color:#E36209;">encryptedData</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">T</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¦‚æœä½ ä½¿ç”¨ <code>eslint</code> è¯·åœ¨ <code>.eslintrc.cjs</code> æ–‡ä»¶ä¸­æ·»åŠ </p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">globals</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#6A737D;">// ä»¥ä¸‹æ˜¯å…¨å±€å˜é‡ eslint ä¸ä¼šæŠ¥&#39;EncryptionPlugin&#39; is not defined.eslint ï¼ˆno-undefï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#B392F0;">EncryptionPlugin</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;readonly&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">$encryptionPlugin</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;readonly&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">	},</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">globals</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6A737D;">// ä»¥ä¸‹æ˜¯å…¨å±€å˜é‡ eslint ä¸ä¼šæŠ¥&#39;EncryptionPlugin&#39; is not defined.eslint ï¼ˆno-undefï¼‰</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">EncryptionPlugin</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;readonly&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">$encryptionPlugin</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;readonly&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2ï¼š é¡µé¢ä½¿ç”¨</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;ts&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">import { inject } from &#39;vue&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">// ä½¿ç”¨ inject å‡½æ•°è·å– encryptionPlugin</span></span>
<span class="line"><span style="color:#E1E4E8;">const encryptionPlugin = inject(&quot;encryptionPlugin&quot;) as EncryptionPlugin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">function handClick() {</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">// ç°åœ¨ä½ å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­ä½¿ç”¨ encryptData å’Œ decryptData æ–¹æ³•äº†</span></span>
<span class="line"><span style="color:#E1E4E8;">	const encryptedData </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> encryptionPlugin.</span><span style="color:#B392F0;">encryptData</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hello World&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">	const decryptedData </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> encryptionPlugin.</span><span style="color:#B392F0;">decryptData</span><span style="color:#E1E4E8;">(encryptedData);</span></span>
<span class="line"><span style="color:#E1E4E8;">	console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;åŠ å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#E1E4E8;">, encryptedData);</span></span>
<span class="line"><span style="color:#E1E4E8;">	console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;è§£å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#E1E4E8;">, decryptedData);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ts&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">import { inject } from &#39;vue&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">// ä½¿ç”¨ inject å‡½æ•°è·å– encryptionPlugin</span></span>
<span class="line"><span style="color:#24292E;">const encryptionPlugin = inject(&quot;encryptionPlugin&quot;) as EncryptionPlugin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">function handClick() {</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">// ç°åœ¨ä½ å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­ä½¿ç”¨ encryptData å’Œ decryptData æ–¹æ³•äº†</span></span>
<span class="line"><span style="color:#24292E;">	const encryptedData </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> encryptionPlugin.</span><span style="color:#6F42C1;">encryptData</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hello World&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	const decryptedData </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> encryptionPlugin.</span><span style="color:#6F42C1;">decryptData</span><span style="color:#24292E;">(encryptedData);</span></span>
<span class="line"><span style="color:#24292E;">	console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;åŠ å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#24292E;">, encryptedData);</span></span>
<span class="line"><span style="color:#24292E;">	console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;è§£å¯† ğŸš€ ==&gt;ï¼š&quot;</span><span style="color:#24292E;">, decryptedData);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div>`,19),e=[o];function t(c,r,y,E,i,u){return n(),a("div",null,e)}const F=s(l,[["render",t]]);export{d as __pageData,F as default};
